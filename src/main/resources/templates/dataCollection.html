<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>直播信息列表</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <link rel="stylesheet" href="/static/layuiadmin/layui/css/layui.css" media="all">
    <link rel="stylesheet" href="/static/layuiadmin/layui/style/admin.css" media="all">
</head>
<body>
<div class="layui-fluid">
    <div class="layui-row layui-col-space15">
       <div class="layui-col-sm6 layui-col-md3">
           <div class="layui-card">
               <div class="layui-card-header">
                    采样数据收集个数
                </div>
                <div class="layui-card-body layuiadmin-card-list" style="text-align:center">
                    <p class="layuiadmin-big-font">6
                        <span class="layui-badge layui-bg-blue layuiadmin-badge">个</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="layui-col-sm6 layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header">
                    正在收集采样的个数
                </div>
                <div class="layui-card-body layuiadmin-card-list" style="text-align:center">
                    <p class="layuiadmin-big-font">2
                        <span class="layui-badge layui-bg-cyan layuiadmin-badge">个</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="layui-col-sm6 layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header">
                    待处理的采样数据个数
                </div>
                <div class="layui-card-body layuiadmin-card-list">
                    <p class="layuiadmin-big-font" style="text-align:center">
                        2
                        <span class="layui-badge layui-bg-cyan layuiadmin-badge">个</span>
                    </p>
                </div>
            </div>
        </div>
        <div class="layui-col-sm6 layui-col-md3">
            <div class="layui-card">
                <div class="layui-card-header">
                    已提交的采样数据个数
                </div>
                <div class="layui-card-body layuiadmin-card-list" style="text-align:center">
                    <p class="layuiadmin-big-font">
                        1
                        <span class="layui-badge layui-bg-cyan layuiadmin-badge">个</span>
                    </p>
                </div>
            </div>
        </div>

        <div class="layui-col-md12">
            <div class="layui-card">
                <div class="layui-card-header">采样数据列表</div>
                <div class="layui-card-body">
                    <table id="demo" lay-filter="test" > </table>
                </div>
            </div>
        </div>
        <script src="/static/layuiadmin/layui/layui.js"></script>
        <script src="/static/js/jquery.min.js"></script>
        <script>
            layui.use('table', function(){
                var table = layui.table;

                //第一个实例
                table.render({
                    // initSort: {
                    //    field: 'long_start_time' //排序字段，对应 cols 设定的各字段名
                    //    ,type: 'desc' //排序方式  asc: 升序、desc: 降序、null: 默认排序
                    // }
                    elem: '#demo'
                    ,height: 600
                    ,url: '/static/dataCollection.json' //数据接口
                    // ,url: '/liveList.json' //test
                    // ,page: true //开启分页
                    ,title: '直播信息'
                    ,cols: [[ //表头
                        {field: 'device_id', title: '设备号', width:150, align: 'center',unresize:'true'}
                        ,{field: 'status', title: '状态', width:100, align: 'center',unresize:'true'}
                        ,{field: 'update_time', title: '更新时间', width:150, align: 'center',unresize:'true'}
                        ,{field: 'location', title: '位置', width:300, align: 'center',unresize:'true'}
                        ,{field: 'leader', title: '负责人', width: 100, align: 'center',unresize:'true'}
                    ]]
                    ,done: function(res, curr, count){
                        $('table').width("100%");
                        $('td').css({ 'cursor': 'pointer' });//设置th无边框
                    }
                });
                //选中行后改变行背景及字体颜色
                $("body").on('click', '.layui-table-body tr ', function () {
                    console.log(this);
                    var data_index = $(this).attr('data-index');//得到当前的tr的index
                    console.log($(this).attr('data-index'));
                    // $(".layui-table-body tr").attr({ "style": "background:#FFFFFF; color:#666666" });//其他tr恢复颜色
                    $(".layui-table-body tr[data-index=" + data_index + "]").attr({ "style": "background:#F2F2F2;color:#666666" });//改变当前tr颜色

                });
                table.on('row(test)',function(obj){
                    // console.log(obj.tr);
                    window.open('/dataDetail');
                })
            });
        </script>
    </div>
</div>
</body>
</html>